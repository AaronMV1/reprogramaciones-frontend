<div class="contenedor">

    <h2>REPROGRAMACIÓN DE CLASES</h2>

    <div class="ventana">

        <div class="ventana-header">

            <div class="ventana-header-titulo">

                <ng-icon name="featherSettings" />
                <h2>Configuración</h2>

            </div>

            <div class="ventana-header-botones">

                <div class="boton boton-color-1" (click)="redirigirInicio()">
                    <ng-icon name="featherXCircle" />
                </div>

            </div>

        </div>

        <div class="separador"></div>

        <div class="grupos">

            <div class="grupo">

                <div class="opcion-fila">
                    <label for="">Límite de reprogramaciones por clase:</label>
                    <select name="" id="" [(ngModel)]="limiteReprogramaciones">
                        <option value="1">1</option>
                        <option value="2" selected>2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                    </select>
                </div>

                <div class="opcion-fila">
                    <label for="">Plazo máximo (en días) para reprogramar una clase no dictada:</label>
                    <select name="" id="" [(ngModel)]="plazoMaximo">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7" selected>7</option>
                    </select>
                </div>

                <div class="opcion-fila">
                    <label for="">Anticipación mínima (en días) para adelantar una clase</label>
                    <select name="" id="" [(ngModel)]="anticipacionMinima">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7" selected>7</option>
                    </select>
                </div>



                <div class="opcion-columna">

                    <label for="">Gestión de notificaciones por correo:</label>

                    <label>
                        <input type="checkbox" name="doa" [(ngModel)]="checkboxDOA">DOA
                    </label>

                    <label>
                        <input type="checkbox" name="docente" [(ngModel)]="checkboxDocente" disabled="true" checked="true">Docente
                    </label>

                    <label>
                        <input type="checkbox" name="alumno" [(ngModel)]="checkboxAlumno" disabled="true" checked="true">Alumno
                    </label>

                    <label>
                        <input type="checkbox" name="coordinadorPrograma" [(ngModel)]="checkboxCoordinadorPrograma" disabled="true" checked="false">Coordinador de Programa
                    </label>

                    <label>
                        <input type="checkbox" name="coordinadorAmbiente" [(ngModel)]="checkboxCoordinadorAmbiente" disabled="true" checked="false">Coordinador de Ambiente
                    </label>

                </div>

            </div>

            <div class="grupo">

                <div class="opcion-fila">
                    <label for="">Lista de usuarios:</label>
                    <div class="boton boton-color-1" (click)="abrirPopup('usuarios')">
                        <p>Abrir</p>
                    </div>
                </div>

                <div class="opcion-fila">
                    <label for="">Configuración del Semestre:</label>
                    <div class="boton boton-color-1" (click)="abrirPopup('semestre')">
                        <p>Abrir</p>
                    </div>
                </div>

            </div>

        </div>

        <div class="botones botones-end">

            <div class="boton boton-color-1" (click)="restablecerPredeterminados()">
                <ng-icon name="featherRotateCcw"></ng-icon>
                <p>Predeterminados</p>
            </div>

            <div class="boton boton-color-1" (click)="actualizarConfiguracion()">
                <ng-icon name="featherSave"></ng-icon>
                <p>Guardar Cambios</p>
            </div>

        </div>

    </div>

</div>

<div class="popup" *ngIf="popupActivo">

    <div class="popup-usuarios" *ngIf="popupActivo === 'usuarios'">

        <div class="popup-header">

            <div class="popup-titulo">
                <ng-icon name="featherUsers" />
                <h3>Lista de Usuarios</h3>
            </div>

            <div class="popup-cerrar" (click)="cerrarPopup()">
                <ng-icon name="featherXCircle" />
            </div>

        </div>

        <div class="campos">

            <div class="campo-contenedor campo-contenedor-33">

                <label for="" class="label label-obligatorio">Nombres</label>

                <div class="campo">
                    <input type="text" placeholder="Nombres" [(ngModel)]="popupUsuarioNombres" />
                </div>

            </div>

            <div class="campo-contenedor campo-contenedor-33">

                <label for="" class="label label-obligatorio">Apellidos</label>

                <div class="campo">

                    <input type="text" placeholder="Apellidos" [(ngModel)]="popupUsuarioApellidos" />

                </div>

            </div>

            <div class="campo-contenedor campo-contenedor-33">

                <label for="" class="label label-obligatorio">Correo</label>

                <div class="campo">

                    <input type="text" placeholder="Correo" [(ngModel)]="popupUsuarioCorreo" />

                </div>

            </div>

            

        </div>

        <div class="campos">

            <div class="campo-contenedor campo-contenedor-33">

                <label for="" class="label label-obligatorio">Perfil</label>

                <div class="campo">

                    <select name="" [(ngModel)]="popupUsuarioPerfil">
                        <option value="" selected="true" disabled="disabled" hidden="true">Seleccione una opción</option>
                        <option value="Docente">Docente</option>
                        <option value="DOA">DOA</option>
                        <option value="Coordinador de Programa" disabled="true">Coordinador de Programa</option>
                        <option value="Coordinador de Ambiente" disabled="true">Coordinador de Ambiente</option>
                    </select>

                </div>

            </div>

            <div class="campo-contenedor campo-contenedor-33">

                @if (popupUsuarioPerfil == 'Coordinador de Programa') {

                <label for="" class="label label-obligatorio">Programa</label>

                <div class="campo">

                    <select name="" [(ngModel)]="popupUsuarioPrograma">
                        <option value="" selected="true" disabled="disabled" hidden="true">Seleccione una opción</option>
                        <option value="Medicina Humana">Medicina Humana</option>
                        <option value="Psicología">Psicología</option>
                        <option value="Arquitectura">Arquitectura</option>
                        <option value="Derecho">Derecho</option>
                        <option value="Administración de Empresas">Administración de Empresas</option>
                        <option value="Ingeniería de Sistemas">Ingeniería de Sistemas</option>
                        <option value="Ingeniería Industrial">Ingeniería Industrial</option>
                        <option value="Ingeniería Civil">Ingeniería Civil</option>
                    </select>

                </div>

                }

            </div>

            <div class="campo-contenedor campo-contenedor-33">

                <div class="campo">

                    <input type="text" placeholder="Búsqueda" [(ngModel)]="popupUsuarioBusqueda" (input)="filtrarUsuarios()" />

                </div>

            </div>


        </div>

        <div class="campos campos-botones">

            <div class="campo-contenedor campo-contenedor-33">

                <div class="boton boton-color-1" (click)="registrarUsuario()">
                    <ng-icon name="featherPlus"></ng-icon>
                    <p>Agregar</p>
                </div>

            </div>

            <div class="campo-contenedor campo-contenedor-33">

                <div class="boton boton-color-1" (click)="actualizarUsuario()">
                    <ng-icon name="featherArrowUp"></ng-icon>
                    <p>Actualizar</p>
                </div>

            </div>

            <div class="campo-contenedor campo-contenedor-33">

                <div class="boton boton-color-1" (click)="eliminarUsuario()">
                    <ng-icon name="featherX"></ng-icon>
                    <p>Eliminar</p>
                </div>

            </div>

        </div>

        <div class="popup-lista">

            <table>

                <thead>
                    <tr>
                        <th>Nombres</th>
                        <th>Apellidos</th>
                        <th>Correo</th>
                        <th>Perfil</th>
                        <th>Programa</th>
                    </tr>
                </thead>

                <tbody>

                    @for (item of usuariosFiltrados; track $index) {

                    <tr (click)="copiarUsuarioDatos(item)">
                        <td>{{item.nombres}}</td>
                        <td>{{item.apellidos}}</td>
                        <td>{{item.correo}}</td>
                        <td>{{item.perfil}}</td>
                        <td>{{item.programa}}</td>
                    </tr>

                    }

                </tbody>

            </table>

        </div>

        <p>• Para actualizar o eliminar una cuenta es necesario ingresar el correo electrónico asociado.</p>

    </div>

    <div class="popup-semestre" *ngIf="popupActivo === 'semestre'">

        <div class="popup-header">

            <div class="popup-titulo">
                <ng-icon name="featherLayers" />
                <h3>Configuración del Semestre</h3>
            </div>

            <div class="popup-cerrar" (click)="cerrarPopup()">
                <ng-icon name="featherXCircle" />
            </div>

        </div>

        <div class="campos">

            <div class="campo-contenedor campo-contenedor-25">

                <label for="" class="label">Grado Académico</label>

                <div class="campo">
                    <input type="text" placeholder="Grado Académico" [(ngModel)]="popupSemestreGrado" disabled="true"/>
                </div>

            </div>

            <div class="campo-contenedor campo-contenedor-25">

                <label for="" class="label">Cod. Grado Académico</label>

                <div class="campo">
                    <input type="text" placeholder="Código de Grado Académico" [(ngModel)]="popupSemestreCodGrado"/>
                </div>

            </div>

            <div class="campo-contenedor campo-contenedor-25">

                <label for="" class="label label-obligatorio">Semestre</label>

                <div class="campo">
                    <input type="text" placeholder="Semestre" [(ngModel)]="popupSemestreSemestre" />
                </div>

            </div>

            <div class="campo-contenedor campo-contenedor-25">

                <label for="" class="label label-obligatorio">Código del Semestre</label>

                <div class="campo">
                    <input type="text" placeholder="Código del Semestre" [(ngModel)]="popupSemestreCodSemestre" />
                </div>

            </div>

        </div>

        <div class="campos campos-botones">

            <div class="campo-contenedor campo-contenedor-25">

                <label for="" class="label label-obligatorio">Fecha Inicio</label>

                <div class="campo">

                    <input type="date" [(ngModel)]="popupSemestreFInicio" />

                </div>

            </div>

            <div class="campo-contenedor campo-contenedor-25">

                <label for="" class="label label-obligatorio">Fecha Cierre</label>

                <div class="campo">

                    <input type="date" [(ngModel)]="popupSemestreFCierre" />

                </div>

            </div>

            <div class="campo-contenedor campo-contenedor-25"></div>

            <div class="campo-contenedor campo-contenedor-25">

                <div class="boton boton-color-1" (click)="actualizarConfiguracionSemestre()">
                    <ng-icon name="featherArrowUp"></ng-icon>
                    <p>Actualizar</p>
                </div>

            </div>

        </div>

        <div class="popup-semestre-lista">

            <table>

                <thead>
                    <tr>
                        <th>Grado Académico</th>
                        <th>Semestre (Código)</th>
                        <th>Fecha Inicio</th>
                        <th>Fecha Cierre</th>
                    </tr>
                </thead>

                <tbody>

                    @for (item of listaSemestre; track $index) {

                        <tr (click)="copiarSemestreDatos(item)">
                            <td>{{item.grado}}</td>
                            <td>{{item.codigoSemestre}}</td>
                            <td>{{item.fechaInicio | date:'dd / MM / yyyy'}}</td>
                            <td>{{item.fechaCierre | date:'dd / MM / yyyy'}}</td>
                        </tr>

                    }

                </tbody>

            </table>

        </div>

    </div>

</div>